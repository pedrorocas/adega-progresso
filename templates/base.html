<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Adega Progresso</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            wine: {
              300: '#A13A43',
              400: '#7A1A22',
              500: '#590E15',
              600: '#4F0D13',
              700: '#450B11',
              800: '#3B0A0F',
              900: '#2E070B',
              950: '#130306'
            },
            gold: {
              300: '#FFE082',
              400: '#F2C94C',
              500: '#E0B53A'
            },
            champ: {
              100: '#FFF3E0',
              200: '#F7E7CE'
            }
          },
          boxShadow: {
            soft: '0 10px 40px rgba(0,0,0,.35)'
          }
        }
      }
    }
  </script>

  <!-- ======================
       ÍCONE DE CALENDÁRIO CLARO
       ====================== -->
  <style>
    /* Texto claro no input date */
    input[type="date"] {
      color: #FFF3E0 !important;
    }

    /* Clarear o ícone do calendário no Chrome/Edge */
    input[type="date"]::-webkit-calendar-picker-indicator {
      opacity: 1 !important;
      filter: invert(1) brightness(2.3) saturate(2) contrast(1.4) !important;
      cursor: pointer;
    }

    /* Ajuste especial somente para Chrome/Edge (iOS ignora) */
    @supports (-webkit-touch-callout: none) {
      input[type="date"]::-webkit-calendar-picker-indicator {
        filter: invert(1) brightness(3) contrast(2) !important;
      }
    }
  </style>

</head>

<body class="bg-wine-950 text-champ-100 min-h-screen flex flex-col">

  <!-- NAVBAR -->
  <header class="border-b border-wine-900 bg-wine-900/70 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="{{ url_for('dashboard') if session.get('user_id') else url_for('login') }}"
         class="text-lg md:text-xl font-semibold tracking-wide flex items-center gap-2">
        <span class="inline-block h-2 w-2 rounded-full bg-gold-400 shadow"></span>
        <span class="text-gold-400">Adega</span> Progresso
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        {% if session.get('user_id') %}
          <a href="{{ url_for('dashboard') }}" class="hover:text-gold-400 transition">Dashboard</a>
          <a href="{{ url_for('produtos_list') }}" class="hover:text-gold-400 transition">Vinhos</a>
          <a href="{{ url_for('vendas_list') }}" class="hover:text-gold-400 transition">Vendas</a>
          <a href="{{ url_for('perfil') }}" class="hover:text-gold-400 transition">Perfil</a>
          <a href="{{ url_for('logout') }}" class="hover:text-gold-400 transition">Sair</a>
        {% else %}
          <a href="{{ url_for('login') }}" class="hover:text-gold-400 transition">Login</a>
          <a href="{{ url_for('registrar') }}" class="hover:text-gold-400 transition">Cadastro</a>
        {% endif %}
      </nav>
    </div>
  </header>

  <!-- FLASH MESSAGES -->
  <div class="max-w-md w-full mx-auto px-4 mt-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="space-y-2">
          {% for category, message in messages %}
          <div class="rounded-xl px-4 py-3 text-sm shadow-soft
            {% if category=='success' %} bg-emerald-800/25 border border-emerald-500/40 text-emerald-200
            {% elif category=='danger' %}  bg-red-800/25     border border-red-500/40     text-red-200
            {% else %}                     bg-wine-800/35    border border-wine-700       text-champ-100 {% endif %}">
            {{ message }}
          </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </div>

  <!-- CONTEÚDO -->
  <main class="flex-1">
    {% block content %}{% endblock %}
  </main>

  <!-- RODAPÉ -->
  <footer class="border-t border-wine-900 mt-10">
    <div class="max-w-6xl mx-auto px-4 py-8 text-sm text-champ-100/70">
      © 2025 Adega Progresso.
    </div>
  </footer>

  <script>
    // Nada adicional aqui — você já usa Tailwind em tudo.
  </script>

</body>
</html>
